---
layout     : post
title      : "anime.js"
date       : 2022-09-14
categories : RMIT CCS
---

<script src='https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js'>
</script>

<script type=module>

    // get the h1 element containing the title of the blog
    const title = document.getElementsByClassName ("post-title p-name").item(0)

    // start it off the right edge of the view portal
    title.style.marginLeft = `${ title.offsetWidth }px`

    // the anime () function is how we animate
    // we pass it an object specifying what we 
    // want to animate, and how
    anime ({

        // the targets property specifies
        // what is being animated.  in this
        // case it is the title element
        targets: title,

        // this is the CSS property of that element
        // we are animating.  We are going to 0 from
        // its starting position, window.innerWidth
        marginLeft: title.offsetWidth,

        // the duration of the animation 
        // in milliseconds
        duration: 1000,
    })

    // assign to the elements onclock property
    // when a user clicks on the title element
    // the browser will call this function
    title.onclick = () => {

        // animate
        anime ({

            // the title element
            targets: title,

            // assign the .style.marginLeft property
            // to the value of the .offsetWidth property
            marginLeft: title.offsetWidth,

            // animate over 1 second
            duration: 1000,
        })
    }
</script>

From their [website](https://animejs.com/):

> Anime.js (/ˈæn.ə.meɪ/) is a lightweight JavaScript animation library with a simple, yet powerful API.
> It works with CSS properties, SVG, DOM attributes and JavaScript Objects.

Click on the title of this blog.  Code is below:

```html
<script src='https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js'>
</script>

<script type=module>

    // get the h1 element containing the title of the blog
    const title = document.getElementsByClassName ("post-title p-name").item(0)

    // start it off the right edge of the view portal
    title.style.marginLeft = `${ title.offsetWidth }px`

    // the anime () function is how we animate
    // we pass it an object specifying what we 
    // want to animate, and how
    anime ({

        // the targets property specifies
        // what is being animated.  in this
        // case it is the title element
        targets: title,

        // this is the CSS property of that element
        // we are animating.  We are going to 0 from
        // its starting position, window.innerWidth
        marginLeft: title.offsetWidth,

        // the duration of the animation 
        // in milliseconds
        duration: 1000,
    })

    // assign to the elements onclock property
    // when a user clicks on the title element
    // the browser will call this function
    title.onclick = () => {

        // animate
        anime ({

            // the title element
            targets: title,

            // assign the .style.marginLeft property
            // to the value of the .offsetWidth property
            marginLeft: title.offsetWidth,

            // animate over 1 second
            duration: 1000,
        })
    }
</script>
```

##  Rotating a div element:

<div id=rotating_square></div>

<script type=module>

    // getting and formatting the outer div
    const div = document.getElementById (`rotating_square`)
    div.width = div.parentNode.scrollWidth
    div.height = div.width * 9 / 16
    div.style.height = `${ div.height }px`
    div.style.backgroundColor = `turquoise`

    // making a square pink div
    const square = document.createElement (`div`)
    square.style.width  = `100px`
    square.style.height = `100px`
    square.style.backgroundColor = `hotpink`
    square.style.position = `relative`

    // using the style.transform property to move the div
    const trans_x = `translateX(${ div.width /2 - 50 }px)`
    const trans_y = `translateY(${ div.height/2 - 50 }px)`
    square.style.transform = `${ trans_x } ${ trans_y }`

    // attaching the square div to the outer div
    div.append (square)


    // the anime () function will return an object
    // we can use to control the animation
    const square_mover = anime ({

            // remember the s at the end of targets!
            targets: square,
            duration: 3000,

            // this will rotate the div 
            // via its style.transform property
            rotate: `315deg`,

            // this will scale the div
            // via its style.transform property
            scale: 2,

            // makes it animate in both directions
            direction: `alternate`,

            // will not autoplay
            autoplay: false,
        })

    // registering the square_mover.play () method
    // to the onclick event listener
    div.onclick = () => square_mover.play ()
</script>


```html
<div id=rotating_square></div>

<script type=module>

    // getting and formatting the outer div
    const div = document.getElementById (`rotating_square`)
    div.width = div.parentNode.scrollWidth
    div.height = div.width * 9 / 16
    div.style.height = `${ div.height }px`
    div.style.backgroundColor = `turquoise`

    // making a square pink div
    const square = document.createElement (`div`)
    square.style.width  = `100px`
    square.style.height = `100px`
    square.style.backgroundColor = `hotpink`
    square.style.position = `relative`

    // using the style.transform property to move the div
    const trans_x = `translateX(${ div.width /2 - 50 }px)`
    const trans_y = `translateY(${ div.height/2 - 50 }px)`
    square.style.transform = `${ trans_x } ${ trans_y }`

    // attaching the square div to the outer div
    div.append (square)


    // the anime () function will return an object
    // we can use to control the animation
    const square_mover = anime ({

            // remember the s at the end of targets!
            targets: square,
            duration: 3000,

            // this will rotate the div 
            // via its style.transform property
            rotate: `315deg`,

            // this will scale the div
            // via its style.transform property
            scale: 2,

            // makes it animate in both directions
            direction: `alternate`,

            // will not autoplay
            autoplay: false,
        })

    // registering the square_mover.play () method
    // to the onclick event listener
    div.onclick = () => square_mover.play ()
</script>
```

##  An array of divs:

<div id=many_squares></div>

<script type=module>

    const div = document.getElementById (`many_squares`)
    div.width = div.parentNode.scrollWidth
    div.height = div.width * 9 / 16
    div.style.height = `${ div.height }px`
    div.style.backgroundColor = `turquoise`

    // quick maths to work out the centred coordinates
    const x_off = (div.width / 2) - (260 / 2) - 5
    const y_off = (div.height / 2) - (20 / 2) - 5

    // making 7 pink, square divs
    for (let i = 0; i < 7; i++) {
        const square = document.createElement (`div`)
        square.style.width  = `20px`
        square.style.height = `20px`
        square.style.backgroundColor = `hotpink`
        square.style.position = `relative`

        // tells them to line up next to each other
        // (instead of underneath each other)
        square.style.display = `inline-block`

        // spread them out a bit
        square.style.margin = `10px`

        // center them in the outer div
        square.style.transform = `translate(${ x_off }px, ${ y_off }px)`

        // attach them to the outer div
        div.append (square)
    }

    // creating the animation interface object
    const animator = anime ({

            // passing all the outer div's
            // child nodes as targets
            targets: div.childNodes,

            // do the same animation as in
            // the previous example
            duration: 3000,
            rotate: `315deg`,
            scale: 2,
            direction: `alternate`,
            autoplay: false,

            // but this time stagger the timing
            delay: anime.stagger (100),
        })

    // when click -> .play () method on the
    // animation interface object
    div.onclick = () => animator.play ()
</script>

```html
<div id=many_squares></div>

<script type=module>

    const div = document.getElementById (`many_squares`)
    div.width = div.parentNode.scrollWidth
    div.height = div.width * 9 / 16
    div.style.height = `${ div.height }px`
    div.style.backgroundColor = `turquoise`

    // quick maths to work out the centred coordinates
    const x_off = (div.width / 2) - (260 / 2) - 5
    const y_off = (div.height / 2) - (20 / 2) - 5

    // making 7 pink, square divs
    for (let i = 0; i < 7; i++) {
        const square = document.createElement (`div`)
        square.style.width  = `20px`
        square.style.height = `20px`
        square.style.backgroundColor = `hotpink`
        square.style.position = `relative`

        // tells them to line up next to each other
        // (instead of underneath each other)
        square.style.display = `inline-block`

        // spread them out a bit
        square.style.margin = `10px`

        // center them in the outer div
        square.style.transform = `translate(${ x_off }px, ${ y_off }px)`

        // attach them to the outer div
        div.append (square)
    }

    // creating the animation interface object
    const animator = anime ({

            // passing all the outer div's
            // child nodes as targets
            targets: div.childNodes,

            // do the same animation as in
            // the previous example
            duration: 3000,
            rotate: `315deg`,
            scale: 2,
            direction: `alternate`,
            autoplay: false,

            // but this time stagger the timing
            delay: anime.stagger (100),
        })

    // when click -> .play () method on the
    // animation interface object
    div.onclick = () => animator.play ()
</script>
```